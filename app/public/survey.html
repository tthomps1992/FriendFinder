<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>FriendFinder</title>
    <!-- CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    <!-- Chosen: inspect demo found below links-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
</head>

<body>
    <div class="container">
        <h2>Survey Questions</h2>
        <hr>
        <h3>
            <strong>About You</strong>
        </h3>
        <h4>Name (Required)</h4>
        <input type="text" id="name" class="form-control" required="">
        <h4>Link to Photo Image (Required)</h4>
        <input type="text" id="photo" class="form-control" required="">
        <hr>

        <h4><strong>Q1: You enjoy reading in your spare time instead of watching tv.</strong></h4>
        <select class="chosen-select" id="q1" style="font-weight: bold; border-radius: 5px; padding: 5px; box-shadow: 2px 2px;">
            <option disabled selected value> -- select an option -- </option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <br>
        <br>
        <h4><strong>Q2: You prefer to netflix and chill than go out to the club.</strong></h4>
        <select class="chosen-select" id="q2" style="font-weight: bold; border-radius: 5px; padding: 5px; box-shadow: 2px 2px;">
            <option disabled selected value> -- select an option -- </option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <br>
        <br>
        <h4><strong>Q3: You prefer long hikes with a picnic as a date rather than a restaurant and movie night.</strong></h4>
        <select class="chosen-select" id="q3" style="font-weight: bold; border-radius: 5px; padding: 5px; box-shadow: 2px 2px;">
            <option disabled selected value> -- select an option -- </option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <br>
        <br>
        <h4><strong>Q4: You care about the environment.</strong></h4>
        <select class="chosen-select" id="q4" style="font-weight: bold; border-radius: 5px; padding: 5px; box-shadow: 2px 2px;">
            <option disabled selected value> -- select an option -- </option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <br>
        <br>
        <h4><strong>Q5: You enjoy listening to Hip Hop more than Pop.</strong></h4>
        <select class="chosen-select" id="q5" style="font-weight: bold; border-radius: 5px; padding: 5px; box-shadow: 2px 2px;">
            <option disabled selected value> -- select an option -- </option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <br>
        <br>
        <h4><strong>Q6: Family is ver important to you.</strong></h4>
        <select class="chosen-select" id="q6" style="font-weight: bold; border-radius: 5px; padding: 5px; box-shadow: 2px 2px;">
            <option disabled selected value> -- select an option -- </option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <br>
        <br>
        <h4><strong>Q7: You rather be rich in love than rich with money.</strong></h4>
        <select class="chosen-select" id="q7" style="font-weight: bold; border-radius: 5px; padding: 5px; box-shadow: 2px 2px;">
            <option disabled selected value> -- select an option -- </option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <br>
        <br>
        <h4><strong>Q8: You prefer phone calls over text messages.</strong></h4>
        <select class="chosen-select" id="q8" style="font-weight: bold; border-radius: 5px; padding: 5px; box-shadow: 2px 2px;">
            <option disabled selected value> -- select an option -- </option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <br>
        <br>
        <h4><strong>Q9: You would try anything once.</strong></h4>
        <select class="chosen-select" id="q9" style="font-weight: bold; border-radius: 5px; padding: 5px; box-shadow: 2px 2px;">
            <option disabled selected value> -- select an option -- </option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>

        <br>
        <br>
        <h4><strong>Q10: You are very secure with who you are.</strong></h4>
        <select class="chosen-select" id="q10" style="font-weight: bold; border-radius: 5px; padding: 5px; box-shadow: 2px 2px;">
            <option disabled selected value> -- select an option -- </option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>


        <br>
        <br>
        <!-- Submit Button -->
        <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">
            <i class="fa fa-check-circle" aria-hidden="true"></i>
            Submit
        </button>
        <hr>
        <footer class="footer">
            <div class="container">
                <p><a href="/app/data/friends.js">API Friends List</a> | <a href="https://github.com/tthomps1992/FriendFinder">GitHub
                        Repo</a></p>
            </div>
        </footer>
    </div>

    <!-- Modal shows the results -->

    <div id="results-modal" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">Ã—</button>
                    <h2 class="modal-title"><strong>Best Match</strong></h2>
                </div>
                <div class="modal-body">
                    <h2 id="match-name"></h2>
                    <img id="match-img" height="200" alt="https://static.pexels.com/photos/20787/pexels-photo.jpg">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>


    <script type="text/javascript">
        // Listener for submit button click
        $('#submit').on('click', function (event) {
            // prevents the default submit button action
            event.preventDefault();
            // Set local variables
            var matchStatus = $('.modal-title');
            var modalBody = $('.modal-body');
            // set responses to local variables
            var name = $('#name').val().trim();
            var photo = $('#photo').val();
            var q1 = parseInt($('#q1').val());
            var q2 = parseInt($('#q2').val());
            var q3 = parseInt($('#q3').val());
            var q4 = parseInt($('#q4').val());
            var q5 = parseInt($('#q5').val());
            var q6 = parseInt($('#q6').val());
            var q7 = parseInt($('#q7').val());
            var q8 = parseInt($('#q8').val());
            var q9 = parseInt($('#q9').val());
            var q10 = parseInt($('#q10').val());
            // Set data to be sent to server
            var userData = {
                name: name,
                photo: photo,
                scores: [
                    q1,
                    q2,
                    q3,
                    q4,
                    q5,
                    q6,
                    q7,
                    q8,
                    q9,
                    q10
                ]
            };
            // If responses are valid...
            if (
                (name !== '') && (photo !== '') && (!isNaN(q1)) &&
                (!isNaN(q2)) && (!isNaN(q3)) && (!isNaN(q4)) &&
                (!isNaN(q5)) && (!isNaN(q6)) && (!isNaN(q7)) &&
                (!isNaN(q8)) && (!isNaN(q9)) && (!isNaN(q10))
            ) {
                // Grab the URL of the website
                var currentURL = window.location.origin;
                // AJAX post the data to the friends API. 
                $.post(currentURL + "/api/friends", userData, function (data) {
                    // If the data has a match, then show this
                    if (data.name !== undefined) {
                        matchStatus.html('Your match...');
                        modalBody.html('<p>...is ' + data.name + '!</p><img src="' + data.photo + '" height="200">');
                    } else {
                        // If no match, show this
                        matchStatus.html('Need more data!');
                        modalBody.html('<p>Unfortunately we need more user data to match you</p>');
                    }
                    // Toggle modal on
                    $('.modal').modal('toggle');
                });
            } else {
                // If the form was not valid, this error is shown
                matchStatus.html('Error...');
                modalBody.html('Please answer all questions on the form.');
                // Toggle modal on
                $('.modal').modal('toggle');
            }
        });
        $('#friend-form').reset();
    </script>
</body>

</html>